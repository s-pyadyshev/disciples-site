!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){!function(t,n){var o=function(e,t,n){"use strict";var o,r;if(function(){var t,n={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",fastLoadedClass:"ls-is-cached",iframeLoadMode:0,srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};for(t in r=e.lazySizesConfig||e.lazysizesConfig||{},n)t in r||(r[t]=n[t])}(),!t||!t.getElementsByClassName)return{init:function(){},cfg:r,noSupport:!0};var i=t.documentElement,a=e.HTMLPictureElement,s=e.addEventListener.bind(e),c=e.setTimeout,u=e.requestAnimationFrame||c,l=e.requestIdleCallback,d=/^picture$/i,f=["load","error","lazyincluded","_lazyloaded"],h={},m=Array.prototype.forEach,p=function(e,t){return h[t]||(h[t]=new RegExp("(\\s|^)"+t+"(\\s|$)")),h[t].test(e.getAttribute("class")||"")&&h[t]},v=function(e,t){p(e,t)||e.setAttribute("class",(e.getAttribute("class")||"").trim()+" "+t)},g=function(e,t){var n;(n=p(e,t))&&e.setAttribute("class",(e.getAttribute("class")||"").replace(n," "))},y=function(e,t,n){var o=n?"addEventListener":"removeEventListener";n&&y(e,t),f.forEach((function(n){e[o](n,t)}))},w=function(e,n,r,i,a){var s=t.createEvent("Event");return r||(r={}),r.instance=o,s.initEvent(n,!i,!a),s.detail=r,e.dispatchEvent(s),s},b=function(t,n){var o;!a&&(o=e.picturefill||r.pf)?(n&&n.src&&!t.getAttribute("srcset")&&t.setAttribute("srcset",n.src),o({reevaluate:!0,elements:[t]})):n&&n.src&&(t.src=n.src)},E=function(e,t){return(getComputedStyle(e,null)||{})[t]},S=function(e,t,n){for(n=n||e.offsetWidth;n<r.minSize&&t&&!e._lazysizesWidth;)n=t.offsetWidth,t=t.parentNode;return n},C=(he=[],me=[],pe=he,ve=function(){var e=pe;for(pe=he.length?me:he,de=!0,fe=!1;e.length;)e.shift()();de=!1},ge=function(e,n){de&&!n?e.apply(this,arguments):(pe.push(e),fe||(fe=!0,(t.hidden?c:u)(ve)))},ge._lsFlush=ve,ge),P=function(e,t){return t?function(){C(e)}:function(){var t=this,n=arguments;C((function(){e.apply(t,n)}))}},x=function(e){var t,o,r=function(){t=null,e()},i=function(){var e=n.now()-o;e<99?c(i,99-e):(l||r)(r)};return function(){o=n.now(),t||(t=c(i,99))}},A=(W=/^img$/i,V=/^iframe$/i,X="onscroll"in e&&!/(gle|ing)bot/.test(navigator.userAgent),G=0,K=0,J=-1,Q=function(e){K--,(!e||K<0||!e.target)&&(K=0)},Y=function(e){return null==q&&(q="hidden"==E(t.body,"visibility")),q||!("hidden"==E(e.parentNode,"visibility")&&"hidden"==E(e,"visibility"))},Z=function(e,n){var o,r=e,a=Y(e);for(H-=n,D+=n,U-=n,B+=n;a&&(r=r.offsetParent)&&r!=t.body&&r!=i;)(a=(E(r,"opacity")||1)>0)&&"visible"!=E(r,"overflow")&&(o=r.getBoundingClientRect(),a=B>o.left&&U<o.right&&D>o.top-1&&H<o.bottom+1);return a},ee=function(){var e,n,a,s,c,u,l,d,f,h,m,p,v=o.elements;if((k=r.loadMode)&&K<8&&(e=v.length)){for(n=0,J++;n<e;n++)if(v[n]&&!v[n]._lazyRace)if(!X||o.prematureUnveil&&o.prematureUnveil(v[n]))se(v[n]);else if((d=v[n].getAttribute("data-expand"))&&(u=1*d)||(u=G),h||(h=!r.expand||r.expand<1?i.clientHeight>500&&i.clientWidth>500?500:370:r.expand,o._defEx=h,m=h*r.expFactor,p=r.hFac,q=null,G<m&&K<1&&J>2&&k>2&&!t.hidden?(G=m,J=0):G=k>1&&J>1&&K<6?h:0),f!==u&&(I=innerWidth+u*p,F=innerHeight+u,l=-1*u,f=u),a=v[n].getBoundingClientRect(),(D=a.bottom)>=l&&(H=a.top)<=F&&(B=a.right)>=l*p&&(U=a.left)<=I&&(D||B||U||H)&&(r.loadHidden||Y(v[n]))&&($&&K<3&&!d&&(k<3||J<4)||Z(v[n],u))){if(se(v[n]),c=!0,K>9)break}else!c&&$&&!s&&K<4&&J<4&&k>2&&(_[0]||r.preloadAfterLoad)&&(_[0]||!d&&(D||B||U||H||"auto"!=v[n].getAttribute(r.sizesAttr)))&&(s=_[0]||v[n]);s&&!c&&se(s)}},te=function(e){var t,o=0,i=r.throttleDelay,a=r.ricTimeout,s=function(){t=!1,o=n.now(),e()},u=l&&a>49?function(){l(s,{timeout:a}),a!==r.ricTimeout&&(a=r.ricTimeout)}:P((function(){c(s)}),!0);return function(e){var r;(e=!0===e)&&(a=33),t||(t=!0,(r=i-(n.now()-o))<0&&(r=0),e||r<9?u():c(u,r))}}(ee),ne=function(e){var t=e.target;t._lazyCache?delete t._lazyCache:(Q(e),v(t,r.loadedClass),g(t,r.loadingClass),y(t,re),w(t,"lazyloaded"))},oe=P(ne),re=function(e){oe({target:e.target})},ie=function(e){var t,n=e.getAttribute(r.srcsetAttr);(t=r.customMedia[e.getAttribute("data-media")||e.getAttribute("media")])&&e.setAttribute("media",t),n&&e.setAttribute("srcset",n)},ae=P((function(e,t,n,o,i){var a,s,u,l,f,h;(f=w(e,"lazybeforeunveil",t)).defaultPrevented||(o&&(n?v(e,r.autosizesClass):e.setAttribute("sizes",o)),s=e.getAttribute(r.srcsetAttr),a=e.getAttribute(r.srcAttr),i&&(l=(u=e.parentNode)&&d.test(u.nodeName||"")),h=t.firesLoad||"src"in e&&(s||a||l),f={target:e},v(e,r.loadingClass),h&&(clearTimeout(j),j=c(Q,2500),y(e,re,!0)),l&&m.call(u.getElementsByTagName("source"),ie),s?e.setAttribute("srcset",s):a&&!l&&(V.test(e.nodeName)?function(e,t){var n=e.getAttribute("data-load-mode")||r.iframeLoadMode;0==n?e.contentWindow.location.replace(t):1==n&&(e.src=t)}(e,a):e.src=a),i&&(s||l)&&b(e,{src:a})),e._lazyRace&&delete e._lazyRace,g(e,r.lazyClass),C((function(){var t=e.complete&&e.naturalWidth>1;h&&!t||(t&&v(e,r.fastLoadedClass),ne(f),e._lazyCache=!0,c((function(){"_lazyCache"in e&&delete e._lazyCache}),9)),"lazy"==e.loading&&K--}),!0)})),se=function(e){if(!e._lazyRace){var t,n=W.test(e.nodeName),o=n&&(e.getAttribute(r.sizesAttr)||e.getAttribute("sizes")),i="auto"==o;(!i&&$||!n||!e.getAttribute("src")&&!e.srcset||e.complete||p(e,r.errorClass)||!p(e,r.lazyClass))&&(t=w(e,"lazyunveilread").detail,i&&z.updateElem(e,!0,e.offsetWidth),e._lazyRace=!0,K++,ae(e,t,i,o,n))}},ce=x((function(){r.loadMode=3,te()})),ue=function(){3==r.loadMode&&(r.loadMode=2),ce()},le=function(){$||(n.now()-O<999?c(le,999):($=!0,r.loadMode=3,te(),s("scroll",ue,!0)))},{_:function(){O=n.now(),o.elements=t.getElementsByClassName(r.lazyClass),_=t.getElementsByClassName(r.lazyClass+" "+r.preloadClass),s("scroll",te,!0),s("resize",te,!0),s("pageshow",(function(e){if(e.persisted){var n=t.querySelectorAll("."+r.loadingClass);n.length&&n.forEach&&u((function(){n.forEach((function(e){e.complete&&se(e)}))}))}})),e.MutationObserver?new MutationObserver(te).observe(i,{childList:!0,subtree:!0,attributes:!0}):(i.addEventListener("DOMNodeInserted",te,!0),i.addEventListener("DOMAttrModified",te,!0),setInterval(te,999)),s("hashchange",te,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach((function(e){t.addEventListener(e,te,!0)})),/d$|^c/.test(t.readyState)?le():(s("load",le),t.addEventListener("DOMContentLoaded",te),c(le,2e4)),o.elements.length?(ee(),C._lsFlush()):te()},checkElems:te,unveil:se,_aLSL:ue}),z=(T=P((function(e,t,n,o){var r,i,a;if(e._lazysizesWidth=o,o+="px",e.setAttribute("sizes",o),d.test(t.nodeName||""))for(i=0,a=(r=t.getElementsByTagName("source")).length;i<a;i++)r[i].setAttribute("sizes",o);n.detail.dataAttr||b(e,n.detail)})),M=function(e,t,n){var o,r=e.parentNode;r&&(n=S(e,r,n),(o=w(e,"lazybeforesizes",{width:n,dataAttr:!!t})).defaultPrevented||(n=o.detail.width)&&n!==e._lazysizesWidth&&T(e,r,o,n))},N=x((function(){var e,t=R.length;if(t)for(e=0;e<t;e++)M(R[e])})),{_:function(){R=t.getElementsByClassName(r.autosizesClass),s("resize",N)},checkElems:N,updateElem:M}),L=function(){!L.i&&t.getElementsByClassName&&(L.i=!0,z._(),A._())};var R,T,M,N;var _,$,j,k,O,I,F,H,U,B,D,q,W,V,X,G,K,J,Q,Y,Z,ee,te,ne,oe,re,ie,ae,se,ce,ue,le;var de,fe,he,me,pe,ve,ge;return c((function(){r.init&&L()})),o={cfg:r,autoSizer:z,loader:A,init:L,uP:b,aC:v,rC:g,hC:p,fire:w,gW:S,rAF:C}}(t,t.document,Date);t.lazySizes=o,e.exports&&(e.exports=o)}("undefined"!=typeof window?window:{})},function(e,t,n){(function(n){var o,r,i;r=[],void 0===(i="function"==typeof(o=function(){"use strict";function t(e,t,n){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){s(o.response,t,n)},o.onerror=function(){console.error("could not download file")},o.send()}function o(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function r(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,a=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(e,n,a){var s=i.URL||i.webkitURL,c=document.createElement("a");n=n||e.name||"download",c.download=n,c.rel="noopener","string"==typeof e?(c.href=e,c.origin===location.origin?r(c):o(c.href)?t(e,n,a):r(c,c.target="_blank")):(c.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(c.href)}),4e4),setTimeout((function(){r(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,i){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,i),n);else if(o(e))t(e,n,i);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout((function(){r(a)}))}}:function(e,n,o,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,o);var s="application/octet-stream"===e.type,c=/constructor/i.test(i.HTMLElement)||i.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||s&&c||a)&&"undefined"!=typeof FileReader){var l=new FileReader;l.onloadend=function(){var e=l.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},l.readAsDataURL(e)}else{var d=i.URL||i.webkitURL,f=d.createObjectURL(e);r?r.location=f:location.href=f,r=null,setTimeout((function(){d.revokeObjectURL(f)}),4e4)}});i.saveAs=s.saveAs=s,e.exports=s})?o.apply(t,r):o)||(e.exports=i)}).call(this,n(2))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t);n(0),n(1);var o=function(){var e=document.querySelectorAll("[data-tab]"),t=function(t){!function(){for(var t=0;t<e.length;t++){e[t].classList.remove("is-active");var n=e[t].getAttribute("data-tab");document.getElementById(n).classList.remove("is-active")}}(),t.target.classList.add("is-active");var n=t.currentTarget.getAttribute("data-tab");document.getElementById(n).classList.add("is-active")};!function(){for(var n=0;n<e.length;n+=1)e[n].addEventListener("click",t,!1)}()},r=function(){document.querySelectorAll("[data-toggle]").forEach((function(e){e.addEventListener("click",(function(){var e=this.dataset.toggle,t=document.querySelector(".".concat(e));this.classList.toggle("is-active"),t.classList.toggle("is-active")}))}))},i=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))};const a="application/font-woff",s={woff:a,woff2:a,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"},c=function(){let e=0;return()=>(e+=1,`u${("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}${e}`)}();function u(e){const t=function(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}(e).toLowerCase();return s[t]||""}function l(e){return-1!==e.search(/^(data:)/)}function d(e,t){return`data:${t};base64,${e}`}function f(e){return e.split(/,/)[1]}function h(e){const t=[];for(let n=0,o=e.length;n<o;n+=1)t.push(e[n]);return t}function m(e,t){const n=window.getComputedStyle(e).getPropertyValue(t);return parseFloat(n.replace("px",""))}function p(){let e,t;try{t=process}catch(e){}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}function v(e){return new Promise((t,n)=>{const o=new Image;o.onload=()=>t(o),o.onerror=n,o.crossOrigin="anonymous",o.src=e})}var g;(g||(g={})).clonePseudoElement=function(e,t,n){const o=window.getComputedStyle(e,n),r=o.getPropertyValue("content");if(""===r||"none"===r)return;const i=c();try{t.className=`${t.className} ${i}`}catch(e){return}const a=document.createElement("style");a.appendChild(function(e,t,n){const o=`.${e}:${t}`,r=n.cssText?function(e){const t=e.getPropertyValue("content");return`${e.cssText} content: ${t};`}(n):function(e){return h(e).map(t=>`${t}: ${e.getPropertyValue(t)}${e.getPropertyPriority(t)?" !important":""};`).join(" ")}(n);return document.createTextNode(`${o}{${r}}`)}(i,n,o)),t.appendChild(a)};var y=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))};function w(e){return y(this,void 0,void 0,(function*(){if(e instanceof HTMLCanvasElement){const t=e.toDataURL();return"data:,"===t?Promise.resolve(e.cloneNode(!1)):v(t)}return Promise.resolve(e.cloneNode(!1))}))}function b(e,t){return y(this,void 0,void 0,(function*(){return t instanceof Element?Promise.resolve().then(()=>function(e,t){const n=window.getComputedStyle(e),o=t.style;n.cssText?o.cssText=n.cssText:h(n).forEach(e=>{o.setProperty(e,n.getPropertyValue(e),n.getPropertyPriority(e))})}(e,t)).then(()=>function(e,t){[":before",":after"].forEach(n=>g.clonePseudoElement(e,t,n))}(e,t)).then(()=>function(e,t){e instanceof HTMLTextAreaElement&&(t.innerHTML=e.value);e instanceof HTMLInputElement&&t.setAttribute("value",e.value)}(e,t)).then(()=>t):t}))}function E(e,t,n){return y(this,void 0,void 0,(function*(){return n||!t||t(e)?Promise.resolve(e).then(w).then(n=>function(e,t,n){return y(this,void 0,void 0,(function*(){const o=h(e.childNodes);return 0===o.length?Promise.resolve(t):o.reduce((e,o)=>e.then(()=>E(o,n)).then(e=>{e&&t.appendChild(e)}),Promise.resolve()).then(()=>t)}))}(e,n,t)).then(t=>b(e,t)):Promise.resolve(null)}))}const S={};function C(e,t){let n=e.replace(/\?.*/,"");if(/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),S[n])return S[n];t.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime());const o=(window.fetch?window.fetch(e).then(e=>new Promise((t,n)=>{e.blob().then(n=>{t({blob:n,contentType:e.headers.get("Content-Type")})})})).then(({blob:e,contentType:t})=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>n({contentType:t,blob:r.result}),r.onerror=o,r.readAsDataURL(e)})).then(({blob:e,contentType:t})=>({contentType:t,blob:f(e)})).catch(()=>new Promise((e,t)=>t())):new Promise((t,n)=>{const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(4!==o.readyState)return;if(200!==o.status)return void n(new Error(`Failed to fetch resource: ${e}, status: ${o.status}`));const r=new FileReader;r.onloadend=()=>{t({blob:f(r.result),contentType:o.getResponseHeader("Content-Type")||""})},r.readAsDataURL(o.response)},o.ontimeout=()=>{n(new Error("Timeout of 30000ms occured while fetching resource: "+e))},o.responseType="blob",o.timeout=3e4,o.open("GET",e,!0),o.send()})).catch(n=>{let o="";if(t.imagePlaceholder){const e=t.imagePlaceholder.split(/,/);e&&e[1]&&(o=e[1])}let r="Failed to fetch resource: "+e;return n&&(r="string"==typeof n?n:n.message),r&&console.error(r),o});return S[n]=o,o}const P=/url\((['"]?)([^'"]+?)\1\)/g,x=/url\([^)]+\)\s*format\((["'])([^"']+)\1\)/g,A=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function z(e){return-1!==e.search(P)}function L(e,t,n){if(!z(e))return Promise.resolve(e);const o=function(e,{preferredFontFormat:t}){return t?e.replace(A,e=>{for(;;){const[n,,o]=x.exec(e)||[];if(!o)return"";if(o===t)return`src: ${n};`}}):e}(e,n);return Promise.resolve(o).then(R).then(e=>e.reduce((e,o)=>e.then(e=>function(e,t,n,o,r){const i=n?function(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),o=n.createElement("base"),r=n.createElement("a");n.head.appendChild(o),n.body.appendChild(r),t&&(o.href=t);return r.href=e,r.href}(t,n):t;return Promise.resolve(i).then(e=>r?r(e):C(e,o)).then(e=>"string"==typeof e?d(e,u(t)):d(e.blob,u(t)||e.contentType)).then(n=>e.replace(new RegExp(`(url\\(['"]?)(${function(e){return e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}(t)})(['"]?\\))`,"g"),`$1${n}$3`)).then(e=>e,()=>i)}(e,o,t,n)),Promise.resolve(o)))}function R(e){const t=[];return e.replace(P,(e,n,o)=>(t.push(o),e)),t.filter(e=>!l(e))}var T=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))};function M(e,t){return T(this,void 0,void 0,(function*(){return e instanceof Element?Promise.resolve(e).then(e=>function(e,t){return T(this,void 0,void 0,(function*(){const n=e.style.getPropertyValue("background");return n?Promise.resolve(n).then(e=>L(e,null,t)).then(t=>(e.style.setProperty("background",t,e.style.getPropertyPriority("background")),e)):Promise.resolve(e)}))}(e,t)).then(e=>function(e,t){if(!(e instanceof HTMLImageElement)||l(e.src))return Promise.resolve(e);return Promise.resolve(e.src).then(e=>C(e,t)).then(t=>d(t.blob,u(e.src)||t.contentType)).then(t=>new Promise((n,o)=>{e.onload=n,e.onerror=o,e.src=t})).then(()=>e,()=>e)}(e,t)).then(e=>function(e,t){return T(this,void 0,void 0,(function*(){const n=h(e.childNodes).map(e=>M(e,t));return Promise.all(n).then(()=>e)}))}(e,t)):Promise.resolve(e)}))}var N=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))};const _={};function $(e){return N(this,void 0,void 0,(function*(){return new Promise((t,n)=>{e.ownerDocument||n(new Error("Provided element is not within a Document")),t(h(e.ownerDocument.styleSheets))}).then(e=>function(e){return N(this,void 0,void 0,(function*(){const t=[],n=[];return e.forEach(t=>{if("cssRules"in t)try{h(t.cssRules).forEach((e,o)=>{if(e.type===CSSRule.IMPORT_RULE){let r=o+1;n.push(I(e.href,t).then(F).then(e=>{O(e).forEach(e=>{try{t.insertRule(e,e.startsWith("@import")?r+=1:t.cssRules.length)}catch(t){console.log("Error inserting rule from remote css",{rule:e,error:t})}})}).catch(e=>{console.log("Error loading remote css",e.toString())}))}})}catch(o){const r=e.find(e=>null===e.href)||document.styleSheets[0];null!=t.href&&n.push(I(t.href,r).then(F).then(e=>{O(e).forEach(e=>{r.insertRule(e,t.cssRules.length)})}).catch(e=>{console.log("Error loading remote stylesheet",e.toString())})),console.log("Error inlining remote css file",o.toString())}}),Promise.all(n).then(()=>(e.forEach(e=>{if("cssRules"in e)try{h(e.cssRules).forEach(e=>{t.push(e)})}catch(t){console.log("Error while reading CSS rules from "+e.href,t.toString())}}),t))}))}(e)).then(k)}))}function j(e,t){return N(this,void 0,void 0,(function*(){return $(e).then(e=>Promise.all(e.map(e=>{const n=e.parentStyleSheet?e.parentStyleSheet.href:null;return L(e.cssText,n,t)}))).then(e=>e.join("\n"))}))}function k(e){return e.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>z(e.style.getPropertyValue("src")))}function O(e){if(void 0===e)return[];let t=e;const n=[],o=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi;t=t.replace(/(\/\*[\s\S]*?\*\/)/gi,"");const r=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");let i;for(;i=r.exec(t),null!==i;)n.push(i[0]);t=t.replace(r,"");const a=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){if(i=o.exec(t),null===i){if(i=a.exec(t),null===i)break;o.lastIndex=a.lastIndex}else a.lastIndex=o.lastIndex;n.push(i[0])}return n}function I(e,t){if(_[e])return _[e];const n=fetch(e).then(t=>({url:e,cssText:t.text()}),e=>{console.log("ERROR FETCHING CSS: ",e.toString())});return _[e]=n,n}function F(e){return N(this,void 0,void 0,(function*(){return e.cssText.then(t=>{let n=t;const o=/url\(["']?([^"')]+)["']?\)/g,r=(n.match(/url\([^)]+\)/g)||[]).map(t=>{let r=t.replace(o,"$1");if(!r.startsWith("https://")){const t=e.url;r=new URL(r,t).href}return new Promise((e,o)=>{fetch(r).then(e=>e.blob()).then(o=>{const r=new FileReader;r.addEventListener("load",o=>{n=n.replace(t,`url(${r.result})`),e([t,r.result])}),r.readAsDataURL(o)}).catch(o)})});return Promise.all(r).then(()=>n)})}))}function H(e,t,n){const o="http://www.w3.org/2000/svg",r=document.createElementNS(o,"svg"),a=document.createElementNS(o,"foreignObject");return r.setAttributeNS("","width",""+t),r.setAttributeNS("","height",""+n),a.setAttributeNS("","width","100%"),a.setAttributeNS("","height","100%"),a.setAttributeNS("","x","0"),a.setAttributeNS("","y","0"),a.setAttributeNS("","externalResourcesRequired","true"),r.appendChild(a),a.appendChild(e),function(e){return i(this,void 0,void 0,(function*(){return Promise.resolve().then(()=>(new XMLSerializer).serializeToString(e)).then(encodeURIComponent).then(e=>"data:image/svg+xml;charset=utf-8,"+e)}))}(r)}var U=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))};function B(e,t={}){return{width:t.width||function(e){const t=m(e,"border-left-width"),n=m(e,"border-right-width");return e.scrollWidth+t+n}(e),height:t.height||function(e){const t=m(e,"border-top-width"),n=m(e,"border-bottom-width");return e.scrollHeight+t+n}(e)}}function D(e,t={}){return U(this,void 0,void 0,(function*(){const{width:n,height:o}=B(e,t);return E(e,t.filter,!0).then(e=>function(e,t){return N(this,void 0,void 0,(function*(){return(null!=t.fontEmbedCss?Promise.resolve(t.fontEmbedCss):j(e,t)).then(t=>{const n=document.createElement("style"),o=document.createTextNode(t);return n.appendChild(o),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n),e})}))}(e,t)).then(e=>M(e,t)).then(e=>function(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=t.width+"px"),t.height&&(n.height=t.height+"px");const o=t.style;return null!=o&&Object.keys(o).forEach(e=>{n[e]=o[e]}),e}(e,t)).then(e=>H(e,n,o))}))}function q(e,t={}){return U(this,void 0,void 0,(function*(){return D(e,t).then(v).then((n=100,e=>new Promise(t=>{setTimeout(()=>{t(e)},n)}))).then(n=>{const o=document.createElement("canvas"),r=o.getContext("2d"),i=t.pixelRatio||p(),{width:a,height:s}=B(e,t),c=t.canvasWidth||a,u=t.canvasHeight||s;return o.width=c*i,o.height=u*i,o.style.width=""+c,o.style.height=""+u,t.backgroundColor&&(r.fillStyle=t.backgroundColor,r.fillRect(0,0,o.width,o.height)),r.drawImage(n,0,0,o.width,o.height),o});var n}))}var W=function(e,t){var n=document.querySelector(e);document.querySelector(t).addEventListener("click",(function(){(function(e,t={}){return U(this,void 0,void 0,(function*(){return q(e,t).then(e=>e.toDataURL("image/jpeg",t.quality||1))}))})(n,{quality:.95}).then((function(e){var t=document.createElement("a");t.download="disciples-2.jpeg",t.href=e,t.click()}))}))},V=document.querySelector(".town"),X=document.querySelector(".btn--save"),G=[{town:".empire",saveImage:".btn--save-empire"},{town:".undead",saveImage:".btn--save-undead"},{town:".clans",saveImage:".btn--save-clans"},{town:".legions",saveImage:".btn--save-legions"},{town:".elves",saveImage:".btn--save-elves"}];window.addEventListener("load",(function(){o(),r(),V&&X&&G.forEach((function(e){return W(e.town,e.saveImage)}))}),!1)}]);
//# sourceMappingURL=main.js.map